{"version":3,"sources":["assets/Weather-PNG-File.png","store/consts.js","store/reducer.js","store/index.js","components/header.jsx","components/footer.jsx","components/cities.jsx","config/index.js","components/city.jsx","components/add-city.jsx","store/actions.js","App.jsx","index.js"],"names":["module","exports","__webpack_require__","p","consts","addCity","removeCity","withPersistence","reducer","key","stateRestored","state","action","stored","localStorage","getItem","JSON","parse","error","undefined","newState","setItem","stringify","arguments","length","type","city","Object","objectSpread","payload","cities","toConsumableArray","filter","e","push","store","createStore","components_header","props","react_default","a","createElement","className","role","aria-label","href","src","Logo","width","height","alt","config","appName","components_footer","contactUrl","target","copyright","Cities","_this","this","selectedCity","selected","name","map","index","isSelected","onClick","onSelect","onAdd","Component","APIXU_KEY","APIXU_URL","ViewCity","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","temperature","feelsLike","cloud","wind","direction","pressure","conditionIcon","conditionDesc","localTime","requestApi","prevProps","prevState","snapshot","_this2","url","lat","lng","fetch","then","response","json","_ref","current","time","location","localtime","split","setState","temp_c","feelslike_c","wind_kph","toFixed","wind_dir","pressure_mb","condition","icon","text","humidity","_this3","locationUrl","concat","imageUrl","encodeURI","image","style","backgroundImage","textAlign","onRemove","nextProps","AddCity","value","typeahead","onChange","bind","assertThisInitialized","onClose","onKeyDown","document","addEventListener","removeEventListener","event","setValue","active","DB","toLowerCase","includes","slice","items","item","String","Math","ceil","random","onSubmit","country","placeholder","addCityAction","removeCityAction","App","c","selectCity","closeModal","submitCity","sort","b","localeCompare","modalActive","dbIsLoaded","add_city_AddCity","padding","cities_Cities","city_ViewCity","currentCityIndex","findIndex","connect","dispatch","ReactDOM","render","es","src_App","getElementById"],"mappings":"4EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,sSCEzBC,EAAA,CAAEC,QAFD,WAEUC,WADP,eCkCJC,MApBf,SAAyBC,EAASC,GAChC,IAAIC,GAAgB,EACpB,OAAO,SAACC,EAAOC,GACb,IAAKF,EAAe,CAClB,IAAMG,EAASC,aAAaC,QAAQN,GACpC,GAAII,EACF,IACEF,EAAQK,KAAKC,MAAMJ,GACnB,MAAOK,GACPP,OAAQQ,EAGZT,GAAgB,EAElB,IAAMU,EAAWZ,EAAQG,EAAOC,GAEhC,OADAE,aAAaO,QAAQZ,EAAKO,KAAKM,UAAUF,IAClCA,GAIIb,CAjCf,WAAyC,IAApBI,EAAoBY,UAAAC,OAAA,QAAAL,IAAAI,UAAA,GAAAA,UAAA,GAAZ,GAAIX,EAAQW,UAAAC,OAAA,EAAAD,UAAA,QAAAJ,EACvC,OAAQP,EAAOa,MACb,KAAKrB,EAAOC,QACV,IAAMqB,EAAIC,OAAAC,EAAA,EAAAD,CAAA,GAAQf,EAAOiB,SACnBC,EAASH,OAAAI,EAAA,EAAAJ,CAAIhB,GAAOqB,OAAO,SAAAC,GAAC,OAAIA,EAAExB,MAAQiB,EAAKjB,MAErD,OADAqB,EAAOI,KAAKR,GACLI,EACT,KAAK1B,EAAOE,WACV,OAAOqB,OAAAI,EAAA,EAAAJ,CAAIhB,GAAOqB,OAAO,SAAAC,GAAC,OAAIA,EAAExB,MAAQG,EAAOiB,UAEnD,OAAOlB,GAuBmC,UChC7BwB,EADDC,YAAY5B,8DCC1B6B,SAAA,SAAeC,GACb,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SAASC,KAAK,aAAaC,aAAW,mBACnDL,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBACbH,EAAAC,EAAAC,cAAA,KAAGC,UAAU,cAAcG,KAAK,KAC9BN,EAAAC,EAAAC,cAAA,OAAKK,IAAKC,IAAML,UAAU,OAAOM,MAAM,KAAKC,OAAO,KAAKC,IAAI,SAC5DX,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBAAmBJ,EAAMa,OAAOC,cCN1CC,SAAA,SAAAf,GACb,OACEC,EAAAC,EAAAC,cAAA,UAAQC,UAAU,UAChBH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAAA,KACEI,KAAMP,EAAMa,OAAOG,WACnBC,OAAO,SACPb,UAAU,kBAETJ,EAAMa,OAAOK,eCRHC,mLACV,IAAAC,EAAAC,KACDC,EAAeD,KAAKrB,MAAMuB,UAAYF,KAAKrB,MAAMuB,SAASC,KAC1DhC,EAAS6B,KAAKrB,MAAMR,OAAOiC,IAAI,SAACrC,EAAMsC,GAC1C,IAGMC,EAAaL,IAAiBlC,EAAKoC,KACzC,OACEvB,EAAAC,EAAAC,cAAA,MAAIhC,IAAKuD,GACPzB,EAAAC,EAAAC,cAAA,KAAGyB,QANS,WACdR,EAAKpB,MAAM6B,SAASzC,IAKGgB,UAAWuB,EAAa,YAAc,IACxDvC,EAAKoC,SAKd,OACEvB,EAAAC,EAAAC,cAAA,SAAOC,UAAU,QACdZ,EAAON,OAASe,EAAAC,EAAAC,cAAA,KAAGC,UAAU,cAAb,eAA4C,GAE7DH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,aAAaZ,GAC1BA,EAAON,OACNe,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACbH,EAAAC,EAAAC,cAAA,YAGF,GAGFF,EAAAC,EAAAC,cAAA,MAAIC,UAAU,aACZH,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,KAAGyB,QAASP,KAAKrB,MAAM8B,OACrB7B,EAAAC,EAAAC,cAAA,QAAMC,UAAU,QACdH,EAAAC,EAAAC,cAAA,KAAGC,UAAU,iBAFjB,sBA/BwB2B,aCJrBlB,EAAA,CACbC,QAAS,cACTI,UAAW,uBACXF,WAAY,wDACZgB,UAAW,kCACXC,UAAW,wCCEQC,qBACnB,SAAAA,EAAYlC,GAAO,IAAAoB,EAAA,OAAA/B,OAAA8C,EAAA,EAAA9C,CAAAgC,KAAAa,IACjBd,EAAA/B,OAAA+C,EAAA,EAAA/C,CAAAgC,KAAAhC,OAAAgD,EAAA,EAAAhD,CAAA6C,GAAAI,KAAAjB,KAAMrB,KACD3B,MAAQ,CACXkE,YAAa,MACbC,UAAW,MACXC,MAAO,MACPC,KAAM,MACNC,UAAW,MACXC,SAAU,MACVC,eAAe,EACfC,cAAe,MACfC,UAAW,OAXI3B,mFAsBjBC,KAAK2B,wDAEYC,EAAWC,EAAWC,GAEnCF,EAAU7D,KAAKoC,OAASH,KAAKrB,MAAMZ,KAAKoC,MAC1CH,KAAK2B,kDAGI,IAAAI,EAAA/B,KACX,GAAIA,KAAKrB,MAAMZ,KAAM,CACnB,IAAMiE,EACJxC,EAAOoB,UACP,QACApB,EAAOmB,UACP,MACAX,KAAKrB,MAAMZ,KAAKkE,IAChB,IACAjC,KAAKrB,MAAMZ,KAAKmE,IAClBC,MAAMH,GACHI,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GAA2B,IAAxBC,EAAwBD,EAAxBC,QACDC,EADyBF,EAAfG,SACMC,UAAUC,MAAM,KAAK,GAC3Cb,EAAKc,SAAS,CACZ3B,YAAasB,EAAQM,OACrB3B,UAAWqB,EAAQO,YACnB3B,MAAOoB,EAAQpB,MACfC,MAA0B,QAAnBmB,EAAQQ,UAAqBC,QAAQ,GAC5C3B,UAAWkB,EAAQU,SACnB3B,UAAiC,QAAtBiB,EAAQW,aAAwBF,QAAQ,GACnDzB,cAAegB,EAAQY,UAAUC,KACjC5B,cAAee,EAAQY,UAAUE,KACjCC,SAAUf,EAAQe,SAClB7B,UAAWe,wCAKZ,IAAAe,EAAAxD,KACDjC,EAAOiC,KAAKrB,MAAMZ,KAClByE,EAAUxC,KAAKhD,MAIfyG,EAAW,8BAAAC,OAAiC3F,EAAKkE,IAAtC,KAAAyB,OAA6C3F,EAAKmE,KAC7DyB,EAAWC,UAAU7F,EAAK8F,OAChC,OACEjF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QACbH,EAAAC,EAAAC,cAAA,OACEC,UAAU,aACV+E,MAAO,CAAEC,gBAAiB,OAASJ,EAAW,MAE9C/E,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACbH,EAAAC,EAAAC,cAAA,OAAKgF,MAAO,CAAEE,UAAW,UACvBpF,EAAAC,EAAAC,cAAA,KACEC,UAAU,0BACVG,KAAMuE,EACN7D,OAAO,UAEPhB,EAAAC,EAAAC,cAAA,QAAMC,UAAU,sBACdH,EAAAC,EAAAC,cAAA,KAAGC,UAAU,gBANjB,aAWFH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UAAUhB,EAAKoC,MAC9BvB,EAAAC,EAAAC,cAAA,OAAKgF,MAAO,CAAEE,UAAW,WACtBxB,EAAQhB,cACP5C,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKK,IAAKqD,EAAQhB,cAAejC,IAAI,eACrCX,EAAAC,EAAAC,cAAA,WAAM0D,EAAQf,gBAGhB,IAGJ7C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UACbH,EAAAC,EAAAC,cAAA,2BACgB0D,EAAQtB,YADxB,oBACmD,IAChDsB,EAAQrB,UAFX,SAIAvC,EAAAC,EAAAC,cAAA,wBAAgB0D,EAAQe,SAAxB,KACA3E,EAAAC,EAAAC,cAAA,wBAAgB0D,EAAQjB,SAAxB,QACA3C,EAAAC,EAAAC,cAAA,oBACS0D,EAAQnB,KADjB,OAC2BmB,EAAQlB,WAEnC1C,EAAAC,EAAAC,cAAA,0BAAkB0D,EAAQd,aAG9B9C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBACbH,EAAAC,EAAAC,cAAA,KACEC,UAAU,wCACVwB,QAnDO,WACfiD,EAAK7E,MAAMsF,SAASlG,EAAKjB,OAgDnB,kEAjGmBoH,EAAWrC,GACtC,OAAIqC,EAAUnG,KAAKoC,OAASH,KAAKrB,MAAMZ,KAAKoC,OAC1CH,KAAK2B,WAAWuC,EAAUnG,KAAKoC,OACxB,UAlByBO,cCFjByD,qBACnB,SAAAA,EAAYxF,GAAO,IAAAoB,EAAA,OAAA/B,OAAA8C,EAAA,EAAA9C,CAAAgC,KAAAmE,IACjBpE,EAAA/B,OAAA+C,EAAA,EAAA/C,CAAAgC,KAAAhC,OAAAgD,EAAA,EAAAhD,CAAAmG,GAAAlD,KAAAjB,KAAMrB,KACD3B,MAAQ,CAAEoH,MAAO,GAAIC,UAAW,IACrCtE,EAAKuE,SAAWvE,EAAKuE,SAASC,KAAdvG,OAAAwG,EAAA,EAAAxG,QAAAwG,EAAA,EAAAxG,CAAA+B,KAChBA,EAAK0E,QAAU1E,EAAK0E,QAAQF,KAAbvG,OAAAwG,EAAA,EAAAxG,QAAAwG,EAAA,EAAAxG,CAAA+B,KACfA,EAAK2E,UAAY3E,EAAK2E,UAAUH,KAAfvG,OAAAwG,EAAA,EAAAxG,QAAAwG,EAAA,EAAAxG,CAAA+B,KALAA,mFAQjB4E,SAASC,iBAAiB,UAAW5E,KAAK0E,0DAG1CC,SAASE,oBAAoB,UAAW7E,KAAK0E,4CAEtCI,GACP9E,KAAK+E,SAASD,EAAMlF,OAAOwE,yCAEnBU,GACJ9E,KAAKrB,MAAMqG,QAAwB,WAAdF,EAAMhI,KAC7BkD,KAAKyE,2CAGAL,GACP,IAAIC,EAAY,GACZD,EAAMvG,OAAS,IACjBwG,EAAYrE,KAAKrB,MAAMsG,GAAG5G,OAAO,SAAAC,GAAC,OAChCA,EAAE6B,KAAK+E,cAAcC,SAASf,EAAMc,iBACpCE,MAAM,EAAG,KAEbpF,KAAK6C,SAAS,CAAEuB,QAAOC,gDAIvBrE,KAAKrB,MAAM8F,2CAGJ,IACHJ,EADGtC,EAAA/B,KAEP,GAAIA,KAAKhD,MAAMqH,UAAUxG,OAAS,EAAG,CACnC,IAAMwH,EAAQrF,KAAKhD,MAAMqH,UAAUjE,IAAI,SAACkF,EAAMjF,GAS5C,OACEzB,EAAAC,EAAAC,cAAA,KAAGhC,IAAKuD,EAAOtB,UAAU,iBAAiBwB,QAT3B,WACf,IAAMxC,EAAIC,OAAAC,EAAA,EAAAD,CAAA,GAAQsH,GAClBvH,EAAKjB,IACHyI,OAAOxH,EAAKoC,MAAQ,IAAMoF,OAAOxH,EAAKkE,KAAO,IAAMsD,OAAOxH,EAAKmE,KACjEnE,EAAK8F,MAAQ,WAAa2B,KAAKC,KAAqB,GAAhBD,KAAKE,UAAiB,OAC1D3D,EAAKpD,MAAMgH,SAAS5H,GACpBgE,EAAKgD,SAAS,MAIXO,EAAKnF,KADR,KACgBmF,EAAKM,WAIzBvB,EAAYzF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aAAasG,QAExChB,EAAYzF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cAE7B,OACEH,EAAAC,EAAAC,cAAA,OAAKC,UAAW,WAAaiB,KAAKrB,MAAMqG,OAAS,YAAc,KAC7DpG,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBACfH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,8DACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACbH,EAAAC,EAAAC,cAAA,SAAOC,UAAU,SAAjB,YACAH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WACbH,EAAAC,EAAAC,cAAA,SACEC,UAAU,QACVjB,KAAK,OACL+H,YAAY,kBACZzB,MAAOpE,KAAKhD,MAAMoH,MAClBE,SAAUtE,KAAKsE,WAEhBD,KAIPzF,EAAAC,EAAAC,cAAA,UAAQC,UAAU,uBAAuBwB,QAASP,KAAKyE,kBA5E1B/D,cCUtB,ICNPoF,EDRR,SAAuB/H,GACrB,MAAO,CACLD,KAAMrB,EAAOC,QACbwB,QAASH,ICKUgI,EDDvB,SAA0BjJ,GACxB,MAAO,CACLgB,KAAMrB,EAAOE,WACbuB,QAASpB,ICDPkJ,cACJ,SAAAA,EAAYxJ,EAAGyJ,GAAG,IAAAlG,EAAA/B,OAAA8C,EAAA,EAAA9C,CAAAgC,KAAAgG,IAChBjG,EAAA/B,OAAA+C,EAAA,EAAA/C,CAAAgC,KAAAhC,OAAAgD,EAAA,EAAAhD,CAAAgI,GAAA/E,KAAAjB,KAAMxD,EAAGyJ,KACJC,WAAanG,EAAKmG,WAAW3B,KAAhBvG,OAAAwG,EAAA,EAAAxG,QAAAwG,EAAA,EAAAxG,CAAA+B,KAClBA,EAAKrD,QAAUqD,EAAKrD,QAAQ6H,KAAbvG,OAAAwG,EAAA,EAAAxG,QAAAwG,EAAA,EAAAxG,CAAA+B,KACfA,EAAKpD,WAAaoD,EAAKpD,WAAW4H,KAAhBvG,OAAAwG,EAAA,EAAAxG,QAAAwG,EAAA,EAAAxG,CAAA+B,KAClBA,EAAKoG,WAAapG,EAAKoG,WAAW5B,KAAhBvG,OAAAwG,EAAA,EAAAxG,QAAAwG,EAAA,EAAAxG,CAAA+B,KAClBA,EAAKqG,WAAarG,EAAKqG,WAAW7B,KAAhBvG,OAAAwG,EAAA,EAAAxG,QAAAwG,EAAA,EAAAxG,CAAA+B,KAClB,IAAM5B,EAAS4B,EAAKpB,MAAMR,OAAOkI,KAAK,SAACxH,EAAGyH,GAAJ,OACpCzH,EAAEsB,KAAKoG,cAAcD,EAAEnG,QART,OAUhBJ,EAAK/C,MAAQ,CACXiD,aAAc9B,EAAO,GACrBqI,aAAa,EACbC,YAAY,EACZxB,GAAI,IAdUlF,mFAmBiB,IAA7BC,KAAKrB,MAAMR,OAAON,QACpBmC,KAAKtD,2CAKP,IAAMuD,EAAeD,KAAKhD,MAAMiD,aAC1B9B,EAAS6B,KAAKrB,MAAMR,OAAOkI,KAAK,SAACxH,EAAGyH,GAAJ,OACpCzH,EAAEsB,KAAKoG,cAAcD,EAAEnG,QAGnB8E,EAAKjF,KAAKhD,MAAMiI,GAChBuB,EAAcxG,KAAKhD,MAAMwJ,YAC/B,OACE5H,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC4H,EAAD,CACEzB,GAAIA,EACJD,OAAQwB,EACR/B,QAASzE,KAAKmG,WACdR,SAAU3F,KAAKoG,aAEjBxH,EAAAC,EAAAC,cAACJ,EAAD,CAAQc,OAAQA,IAChBZ,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,uBAAuB+E,MAAO,CAAE6C,QAAS,SACtD/H,EAAAC,EAAAC,cAAC8H,EAAD,CACEzI,OAAQA,EACR+B,SAAUD,EACVO,SAAUR,KAAKkG,WACfzF,MAAOT,KAAKtD,WAGhBkC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,0BACZkB,EACCrB,EAAAC,EAAAC,cAAC+H,EAAD,CAAM9I,KAAMkC,EAAcgE,SAAUjE,KAAKrD,aAEzC,KAINiC,EAAAC,EAAAC,cAACY,EAAD,CAAQF,OAAQA,wCAIXzB,GACTiC,KAAK6C,SAAS,CACZ5C,aAAclC,uCAGPjB,GACT,IAAMgK,EAAmB9G,KAAKrB,MAAMR,OAAO4I,UAAU,SAAAzI,GAAC,OAAIA,EAAExB,MAAQA,IACpEkD,KAAKrB,MAAMhC,WAAWG,GAClBgK,IAAqB9G,KAAKrB,MAAMR,OAAON,OAAS,EAClDmC,KAAKkG,WAAWlG,KAAKrB,MAAMR,OAAO2I,EAAmB,IAErD9G,KAAKkG,WAAWlG,KAAKrB,MAAMR,OAAO2I,EAAmB,IAEtB,IAA7B9G,KAAKrB,MAAMR,OAAON,QACpBmC,KAAKtD,4CAGC,IAAAqF,EAAA/B,KACHA,KAAKhD,MAAMyJ,WAWdzG,KAAK6C,SAAS,CACZ2D,aAAa,IAXfrE,MAAM,gBACHC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAA6C,GACJlD,EAAKc,SAAS,CACZoC,KACAwB,YAAY,EACZD,aAAa,yCASZzI,GACTiC,KAAKmG,aACLnG,KAAKrB,MAAMjC,QAAQqB,GACnBiC,KAAKkG,WAAWnI,wCAGhBiC,KAAK6C,SAAS,CACZ2D,aAAa,WAxGD9F,aAyHHsG,cAZS,SAAAhK,GACtB,MAAO,CACLmB,OAAQnB,IAGe,SAAAiK,GACzB,MAAO,CACLvK,QAAS,SAAAqB,GAAI,OAAIkJ,EAASnB,EAAc/H,KACxCpB,WAAY,SAAAG,GAAG,OAAImK,EAASlB,EAAiBjJ,OAIlCkK,CAGbhB,eC9HFkB,IAASC,OACPvI,EAAAC,EAAAC,cAACsI,EAAA,EAAD,CAAU5I,MAAOA,GACfI,EAAAC,EAAAC,cAACuI,EAAD,OAEF1C,SAAS2C,eAAe","file":"static/js/main.a57bbdb0.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Weather-PNG-File.3d7b78de.png\";","const addCity = 'ADD_CITY'\r\nconst removeCity = 'REMOVE_CITY'\r\nexport default { addCity, removeCity }\r\n","/* eslint-disable default-case */\r\nimport consts from './consts'\r\nfunction cityReducer(state = [], action) {\r\n  switch (action.type) {\r\n    case consts.addCity:\r\n      const city = { ...action.payload }\r\n      const cities = [...state].filter(e => e.key !== city.key)\r\n      cities.push(city)\r\n      return cities\r\n    case consts.removeCity:\r\n      return [...state].filter(e => e.key !== action.payload)\r\n  }\r\n  return state\r\n}\r\n\r\nfunction withPersistence(reducer, key) {\r\n  let stateRestored = false\r\n  return (state, action) => {\r\n    if (!stateRestored) {\r\n      const stored = localStorage.getItem(key)\r\n      if (stored) {\r\n        try {\r\n          state = JSON.parse(stored)\r\n        } catch (error) {\r\n          state = undefined\r\n        }\r\n      }\r\n      stateRestored = true\r\n    }\r\n    const newState = reducer(state, action)\r\n    localStorage.setItem(key, JSON.stringify(newState))\r\n    return newState\r\n  }\r\n}\r\n\r\nexport default withPersistence(cityReducer, 'cities')\r\n","import { createStore } from 'redux'\r\nimport reducer from './reducer'\r\nconst store = createStore(reducer)\r\nexport default store\r\n","import React from 'react'\r\nimport Logo from '../assets/Weather-PNG-File.png'\r\nimport './header.css'\r\nexport default props => {\r\n  return (\r\n    <nav className=\"navbar\" role=\"navigation\" aria-label=\"main navigation\">\r\n      <div className=\"navbar-brand\">\r\n        <a className=\"navbar-item\" href=\"/\">\r\n          <img src={Logo} className=\"logo\" width=\"28\" height=\"28\" alt=\"logo\" />\r\n          <div className=\"is-size-4 m-l-3\">{props.config.appName}</div>\r\n        </a>\r\n      </div>\r\n    </nav>\r\n  )\r\n}\r\n","/* eslint-disable react/jsx-no-target-blank */\r\nimport React from 'react'\r\nimport './footer.css'\r\nexport default props => {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <div className=\"content is-small\">\r\n        <a\r\n          href={props.config.contactUrl}\r\n          target=\"_blank\"\r\n          className=\"has-text-white\"\r\n        >\r\n          {props.config.copyright}\r\n        </a>\r\n      </div>\r\n    </footer>\r\n  )\r\n}\r\n","/* eslint-disable jsx-a11y/anchor-is-valid */\r\nimport React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nexport default class Cities extends Component {\r\n  render() {\r\n    const selectedCity = this.props.selected && this.props.selected.name\r\n    const cities = this.props.cities.map((city, index) => {\r\n      const onclick = () => {\r\n        this.props.onSelect(city)\r\n      }\r\n      const isSelected = selectedCity === city.name\r\n      return (\r\n        <li key={index}>\r\n          <a onClick={onclick} className={isSelected ? 'is-active' : ''}>\r\n            {city.name}\r\n          </a>\r\n        </li>\r\n      )\r\n    })\r\n    return (\r\n      <aside className=\"menu\">\r\n        {cities.length ? <p className=\"menu-label\">Select city</p> : ''}\r\n\r\n        <ul className=\"menu-list\">{cities}</ul>\r\n        {cities.length ? (\r\n          <div className=\"menu-label\">\r\n            <hr />\r\n          </div>\r\n        ) : (\r\n          ''\r\n        )}\r\n\r\n        <ul className=\"menu-list\">\r\n          <li>\r\n            <a onClick={this.props.onAdd}>\r\n              <span className=\"icon\">\r\n                <i className=\"fas fa-plus\" />\r\n              </span>\r\n              Add city\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </aside>\r\n    )\r\n  }\r\n}\r\n\r\nCities.propTypes = {\r\n  cities: PropTypes.array.isRequired,\r\n  selected: PropTypes.object.isRequired,\r\n  onAdd: PropTypes.func.isRequired,\r\n  onSelect: PropTypes.func.isRequired,\r\n}\r\n","export default {\r\n  appName: 'Weather App',\r\n  copyright: '© MyCompany, 2019',\r\n  contactUrl: 'https://github.com/georgius1024/react-weather-app.git',\r\n  APIXU_KEY: '28dca99ff68243d19d9115506191801',\r\n  APIXU_URL: 'http://api.apixu.com/v1/current.json',\r\n}\r\n","/* eslint-disable jsx-a11y/anchor-is-valid */\r\n/* eslint-disable react/jsx-no-target-blank */\r\nimport React, { Component } from 'react'\r\nimport config from '../config'\r\nimport PropTypes from 'prop-types'\r\nimport './city.css'\r\n\r\nexport default class ViewCity extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      temperature: 'N/A',\r\n      feelsLike: 'N/A',\r\n      cloud: 'N/A',\r\n      wind: 'N/A',\r\n      direction: 'N/A',\r\n      pressure: 'N/A',\r\n      conditionIcon: false,\r\n      conditionDesc: 'N/A',\r\n      localTime: 'N/A',\r\n    }\r\n  }\r\n  static shouldComponentUpdate(nextProps, prevState) {\r\n    if (nextProps.city.name !== this.props.city.name) {\r\n      this.requestApi(nextProps.city.name)\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n  componentDidMount() {\r\n    this.requestApi()\r\n  }\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    // Оптимизация, а без нее - бесконечный цикл запросов\r\n    if (prevProps.city.name !== this.props.city.name) {\r\n      this.requestApi()\r\n    }\r\n  }\r\n  requestApi() {\r\n    if (this.props.city) {\r\n      const url =\r\n        config.APIXU_URL +\r\n        '?key=' +\r\n        config.APIXU_KEY +\r\n        '&q=' +\r\n        this.props.city.lat +\r\n        ',' +\r\n        this.props.city.lng\r\n      fetch(url)\r\n        .then(response => response.json())\r\n        .then(({ current, location }) => {\r\n          const time = location.localtime.split(' ')[1]\r\n          this.setState({\r\n            temperature: current.temp_c,\r\n            feelsLike: current.feelslike_c,\r\n            cloud: current.cloud,\r\n            wind: (current.wind_kph * 0.277778).toFixed(1), // km/h -> m/s\r\n            direction: current.wind_dir,\r\n            pressure: (current.pressure_mb * 0.750062).toFixed(0), // bar -> mmHg\r\n            conditionIcon: current.condition.icon,\r\n            conditionDesc: current.condition.text,\r\n            humidity: current.humidity,\r\n            localTime: time,\r\n          })\r\n        })\r\n    }\r\n  }\r\n  render() {\r\n    const city = this.props.city\r\n    const current = this.state\r\n    const onRemove = () => {\r\n      this.props.onRemove(city.key)\r\n    }\r\n    const locationUrl = `https://maps.google.com/?q=${city.lat},${city.lng}`\r\n    const imageUrl = encodeURI(city.image)\r\n    return (\r\n      <div className=\"city\">\r\n        <div\r\n          className=\"city-inner\"\r\n          style={{ backgroundImage: 'url(' + imageUrl + ')' }}\r\n        >\r\n          <div className=\"city-canvas\">\r\n            <div style={{ textAlign: 'right' }}>\r\n              <a\r\n                className=\"is-light has-text-white\"\r\n                href={locationUrl}\r\n                target=\"_blank\"\r\n              >\r\n                <span className=\"icon is-small  mr4\">\r\n                  <i className=\"fas fa-map\" />\r\n                </span>\r\n                Open map\r\n              </a>\r\n            </div>\r\n            <div className=\"header\">{city.name}</div>\r\n            <div style={{ textAlign: 'center' }}>\r\n              {current.conditionIcon ? (\r\n                <div>\r\n                  <img src={current.conditionIcon} alt=\"conditions\" />\r\n                  <div>{current.conditionDesc}</div>\r\n                </div>\r\n              ) : (\r\n                ''\r\n              )}\r\n            </div>\r\n            <div className=\"column\">\r\n              <div>\r\n                Temperature: {current.temperature}°C, feels like{' '}\r\n                {current.feelsLike}°C\r\n              </div>\r\n              <div>Himidity: {current.humidity}%</div>\r\n              <div>Pressure: {current.pressure}mmHg</div>\r\n              <div>\r\n                Wind: {current.wind}m/s {current.direction}\r\n              </div>\r\n              <div>Local time: {current.localTime}</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"removeControl\">\r\n            <a\r\n              className=\"button is-small is-danger is-outlined\"\r\n              onClick={onRemove}\r\n            >\r\n              Delete city\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nViewCity.propTypes = {\r\n  city: PropTypes.object.isRequired,\r\n  onRemove: PropTypes.func.isRequired,\r\n}\r\n","/* eslint-disable jsx-a11y/anchor-is-valid */\r\nimport React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport './add-city.css'\r\n\r\nexport default class AddCity extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = { value: '', typeahead: [] }\r\n    this.onChange = this.onChange.bind(this)\r\n    this.onClose = this.onClose.bind(this)\r\n    this.onKeyDown = this.onKeyDown.bind(this)\r\n  }\r\n  componentDidMount() {\r\n    document.addEventListener('keydown', this.onKeyDown)\r\n  }\r\n  componentWillUnmount() {\r\n    document.removeEventListener('keydown', this.onKeyDown)\r\n  }\r\n  onChange(event) {\r\n    this.setValue(event.target.value)\r\n  }\r\n  onKeyDown(event) {\r\n    if (this.props.active && event.key === 'Escape') {\r\n      this.onClose()\r\n    }\r\n  }\r\n  setValue(value) {\r\n    let typeahead = []\r\n    if (value.length > 3) {\r\n      typeahead = this.props.DB.filter(e =>\r\n        e.name.toLowerCase().includes(value.toLowerCase())\r\n      ).slice(0, 50)\r\n    }\r\n    this.setState({ value, typeahead })\r\n  }\r\n\r\n  onClose() {\r\n    this.props.onClose()\r\n  }\r\n\r\n  render() {\r\n    let typeahead\r\n    if (this.state.typeahead.length > 1) {\r\n      const items = this.state.typeahead.map((item, index) => {\r\n        const onSelect = () => {\r\n          const city = { ...item }\r\n          city.key =\r\n            String(city.name) + '.' + String(city.lat) + '.' + String(city.lng)\r\n          city.image = '/images/' + Math.ceil(Math.random() * 26) + '.jpg'\r\n          this.props.onSubmit(city)\r\n          this.setValue('')\r\n        }\r\n        return (\r\n          <a key={index} className=\"typeahead-item\" onClick={onSelect}>\r\n            {item.name}, {item.country}\r\n          </a>\r\n        )\r\n      })\r\n      typeahead = <div className=\"typeahead\">{items}</div>\r\n    } else {\r\n      typeahead = <div className=\"typeahead\" />\r\n    }\r\n    return (\r\n      <div className={'modal  ' + (this.props.active ? 'is-active' : '')}>\r\n        <div className=\"modal-background\" />\r\n        <div className=\"modal-content has-background-white has-text-black-ter form\">\r\n          <div className=\"field\">\r\n            <label className=\"label\">Add city</label>\r\n            <div className=\"control\">\r\n              <input\r\n                className=\"input\"\r\n                type=\"text\"\r\n                placeholder=\"Enter city name\"\r\n                value={this.state.value}\r\n                onChange={this.onChange}\r\n              />\r\n              {typeahead}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <button className=\"modal-close is-large\" onClick={this.onClose} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nAddCity.propTypes = {\r\n  DB: PropTypes.array.isRequired,\r\n  active: PropTypes.bool.isRequired,\r\n  onSubmit: PropTypes.func.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n}\r\n","import consts from './consts'\r\nfunction addCityAction(city) {\r\n  return {\r\n    type: consts.addCity,\r\n    payload: city,\r\n  }\r\n}\r\n\r\nfunction removeCityAction(key) {\r\n  return {\r\n    type: consts.removeCity,\r\n    payload: key,\r\n  }\r\n}\r\n\r\nexport default { addCityAction, removeCityAction }\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Header from './components/header'\r\nimport Footer from './components/footer'\r\nimport Cities from './components/cities'\r\nimport City from './components/city'\r\nimport AddCity from './components/add-city'\r\nimport config from './config'\r\nimport actions from './store/actions'\r\nconst { addCityAction, removeCityAction } = actions\r\nclass App extends Component {\r\n  constructor(p, c) {\r\n    super(p, c)\r\n    this.selectCity = this.selectCity.bind(this)\r\n    this.addCity = this.addCity.bind(this)\r\n    this.removeCity = this.removeCity.bind(this)\r\n    this.closeModal = this.closeModal.bind(this)\r\n    this.submitCity = this.submitCity.bind(this)\r\n    const cities = this.props.cities.sort((a, b) =>\r\n      a.name.localeCompare(b.name)\r\n    )\r\n    this.state = {\r\n      selectedCity: cities[0],\r\n      modalActive: false,\r\n      dbIsLoaded: false,\r\n      DB: [],\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.cities.length === 0) {\r\n      this.addCity()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const selectedCity = this.state.selectedCity\r\n    const cities = this.props.cities.sort((a, b) =>\r\n      a.name.localeCompare(b.name)\r\n    )\r\n\r\n    const DB = this.state.DB\r\n    const modalActive = this.state.modalActive\r\n    return (\r\n      <div>\r\n        <AddCity\r\n          DB={DB}\r\n          active={modalActive}\r\n          onClose={this.closeModal}\r\n          onSubmit={this.submitCity}\r\n        />\r\n        <Header config={config} />\r\n        <div className=\"columns\">\r\n          <div className=\"column is-two-fifths\" style={{ padding: '16px' }}>\r\n            <Cities\r\n              cities={cities}\r\n              selected={selectedCity}\r\n              onSelect={this.selectCity}\r\n              onAdd={this.addCity}\r\n            />\r\n          </div>\r\n          <div className=\"column is-three-fifths\">\r\n            {selectedCity ? (\r\n              <City city={selectedCity} onRemove={this.removeCity} />\r\n            ) : (\r\n              ''\r\n            )}\r\n          </div>\r\n        </div>\r\n        <Footer config={config} />\r\n      </div>\r\n    )\r\n  }\r\n  selectCity(city) {\r\n    this.setState({\r\n      selectedCity: city,\r\n    })\r\n  }\r\n  removeCity(key) {\r\n    const currentCityIndex = this.props.cities.findIndex(e => e.key === key)\r\n    this.props.removeCity(key)\r\n    if (currentCityIndex === this.props.cities.length - 1) {\r\n      this.selectCity(this.props.cities[currentCityIndex - 1])\r\n    } else {\r\n      this.selectCity(this.props.cities[currentCityIndex + 1])\r\n    }\r\n    if (this.props.cities.length === 1) {\r\n      this.addCity()\r\n    }\r\n  }\r\n  addCity() {\r\n    if (!this.state.dbIsLoaded) {\r\n      fetch('/cities.json')\r\n        .then(response => response.json())\r\n        .then(DB => {\r\n          this.setState({\r\n            DB,\r\n            dbIsLoaded: true,\r\n            modalActive: true,\r\n          })\r\n        })\r\n    } else {\r\n      this.setState({\r\n        modalActive: true,\r\n      })\r\n    }\r\n  }\r\n  submitCity(city) {\r\n    this.closeModal()\r\n    this.props.addCity(city)\r\n    this.selectCity(city)\r\n  }\r\n  closeModal() {\r\n    this.setState({\r\n      modalActive: false,\r\n    })\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    cities: state,\r\n  }\r\n}\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    addCity: city => dispatch(addCityAction(city)),\r\n    removeCity: key => dispatch(removeCityAction(key)),\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(App)\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { Provider } from 'react-redux'\r\nimport store from './store'\r\nimport App from './App'\r\nimport 'bulma/css/bulma.css'\r\nimport './assets/bulmaswatch.min.css'\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}