(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/Weather-PNG-File.3d7b78de.png"},21:function(e,t,a){e.exports=a(42)},30:function(e,t,a){},32:function(e,t,a){},34:function(e,t,a){},36:function(e,t,a){},40:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(18),s=a.n(c),o=a(10),l=a(9),r=a(14),m=a(11),u={addCity:"ADD_CITY",removeCity:"REMOVE_CITY"};var d=function(e,t){var a=!1;return function(n,i){if(!a){var c=localStorage.getItem(t);if(c)try{n=JSON.parse(c)}catch(o){n=void 0}a=!0}var s=e(n,i);return localStorage.setItem(t,JSON.stringify(s)),s}}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.addCity:var a=Object(m.a)({},t.payload),n=Object(r.a)(e).filter(function(e){return e.key!==a.key});return n.push(a),n;case u.removeCity:return Object(r.a)(e).filter(function(e){return e.key!==t.payload})}return e},"cities"),p=Object(l.b)(d),h=a(2),v=a(3),y=a(6),f=a(4),b=a(5),E=a(1),C=a(20),g=a.n(C),N=(a(30),function(e){return i.a.createElement("nav",{className:"navbar",role:"navigation","aria-label":"main navigation"},i.a.createElement("div",{className:"navbar-brand"},i.a.createElement("a",{className:"navbar-item",href:"/"},i.a.createElement("img",{src:g.a,className:"logo",width:"28",height:"28",alt:"logo"}),i.a.createElement("div",{className:"is-size-4 m-l-3"},e.config.appName))))}),k=(a(32),function(e){return i.a.createElement("footer",{className:"footer"},i.a.createElement("div",{className:"content is-small"},i.a.createElement("a",{href:e.config.contactUrl,target:"_blank",className:"has-text-white"},e.config.copyright)))}),O=function(e){function t(){return Object(h.a)(this,t),Object(y.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this,t=this.props.selected&&this.props.selected.name,a=this.props.cities.map(function(a,n){var c=t===a.name;return i.a.createElement("li",{key:n},i.a.createElement("a",{onClick:function(){e.props.onSelect(a)},className:c?"is-active":""},a.name))});return i.a.createElement("aside",{className:"menu"},a.length?i.a.createElement("p",{className:"menu-label"},"Select city"):"",i.a.createElement("ul",{className:"menu-list"},a),a.length?i.a.createElement("div",{className:"menu-label"},i.a.createElement("hr",null)):"",i.a.createElement("ul",{className:"menu-list"},i.a.createElement("li",null,i.a.createElement("a",{onClick:this.props.onAdd},i.a.createElement("span",{className:"icon"},i.a.createElement("i",{className:"fas fa-plus"})),"Add city"))))}}]),t}(n.Component),j={appName:"Weather App",copyright:"\xa9 MyCompany, 2019",contactUrl:"https://github.com/georgius1024/react-weather-app.git",APIXU_KEY:"28dca99ff68243d19d9115506191801",APIXU_URL:"http://api.apixu.com/v1/current.json"},A=(a(34),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(y.a)(this,Object(f.a)(t).call(this,e))).state={temperature:"N/A",feelsLike:"N/A",cloud:"N/A",wind:"N/A",direction:"N/A",pressure:"N/A",conditionIcon:!1,conditionDesc:"N/A",localTime:"N/A"},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.requestApi()}},{key:"componentDidUpdate",value:function(e,t,a){e.city.name!==this.props.city.name&&this.requestApi()}},{key:"requestApi",value:function(){var e=this;if(this.props.city){var t=j.APIXU_URL+"?key="+j.APIXU_KEY+"&q="+this.props.city.lat+","+this.props.city.lng;fetch(t).then(function(e){return e.json()}).then(function(t){var a=t.current,n=t.location.localtime.split(" ")[1];e.setState({temperature:a.temp_c,feelsLike:a.feelslike_c,cloud:a.cloud,wind:(.277778*a.wind_kph).toFixed(1),direction:a.wind_dir,pressure:(.750062*a.pressure_mb).toFixed(0),conditionIcon:a.condition.icon,conditionDesc:a.condition.text,humidity:a.humidity,localTime:n})})}}},{key:"render",value:function(){var e=this,t=this.props.city,a=this.state,n="https://maps.google.com/?q=".concat(t.lat,",").concat(t.lng),c=encodeURI(t.image);return i.a.createElement("div",{className:"city"},i.a.createElement("div",{className:"city-inner",style:{backgroundImage:"url("+c+")"}},i.a.createElement("div",{className:"city-canvas"},i.a.createElement("div",{style:{textAlign:"right"}},i.a.createElement("a",{className:"is-light has-text-white",href:n,target:"_blank"},i.a.createElement("span",{className:"icon is-small  mr4"},i.a.createElement("i",{className:"fas fa-map"})),"Open map")),i.a.createElement("div",{className:"header"},t.name),i.a.createElement("div",{style:{textAlign:"center"}},a.conditionIcon?i.a.createElement("div",null,i.a.createElement("img",{src:a.conditionIcon,alt:"conditions"}),i.a.createElement("div",null,a.conditionDesc)):""),i.a.createElement("div",{className:"column"},i.a.createElement("div",null,"Temperature: ",a.temperature,"\xb0C, feels like"," ",a.feelsLike,"\xb0C"),i.a.createElement("div",null,"Himidity: ",a.humidity,"%"),i.a.createElement("div",null,"Pressure: ",a.pressure,"mmHg"),i.a.createElement("div",null,"Wind: ",a.wind,"m/s ",a.direction),i.a.createElement("div",null,"Local time: ",a.localTime))),i.a.createElement("div",{className:"removeControl"},i.a.createElement("a",{className:"button is-small is-danger is-outlined",onClick:function(){e.props.onRemove(t.key)}},"Delete city"))))}}],[{key:"shouldComponentUpdate",value:function(e,t){return e.city.name!==this.props.city.name&&(this.requestApi(e.city.name),!0)}}]),t}(n.Component)),w=(a(36),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(y.a)(this,Object(f.a)(t).call(this,e))).state={value:"",typeahead:[]},a.onChange=a.onChange.bind(Object(E.a)(Object(E.a)(a))),a.onClose=a.onClose.bind(Object(E.a)(Object(E.a)(a))),a.onKeyDown=a.onKeyDown.bind(Object(E.a)(Object(E.a)(a))),a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown)}},{key:"onChange",value:function(e){this.setValue(e.target.value)}},{key:"onKeyDown",value:function(e){this.props.active&&"Escape"===e.key&&this.onClose()}},{key:"setValue",value:function(e){var t=[];e.length>3&&(t=this.props.DB.filter(function(t){return t.name.toLowerCase().includes(e.toLowerCase())}).slice(0,50)),this.setState({value:e,typeahead:t})}},{key:"onClose",value:function(){this.props.onClose()}},{key:"render",value:function(){var e,t=this;if(this.state.typeahead.length>1){var a=this.state.typeahead.map(function(e,a){return i.a.createElement("a",{key:a,className:"typeahead-item",onClick:function(){var a=Object(m.a)({},e);a.key=String(a.name)+"."+String(a.lat)+"."+String(a.lng),a.image="/images/"+Math.ceil(26*Math.random())+".jpg",t.props.onSubmit(a),t.setValue("")}},e.name,", ",e.country)});e=i.a.createElement("div",{className:"typeahead"},a)}else e=i.a.createElement("div",{className:"typeahead"});return i.a.createElement("div",{className:"modal  "+(this.props.active?"is-active":"")},i.a.createElement("div",{className:"modal-background"}),i.a.createElement("div",{className:"modal-content has-background-white has-text-black-ter form"},i.a.createElement("div",{className:"field"},i.a.createElement("label",{className:"label"},"Add city"),i.a.createElement("div",{className:"control"},i.a.createElement("input",{className:"input",type:"text",placeholder:"Enter city name",value:this.state.value,onChange:this.onChange}),e))),i.a.createElement("button",{className:"modal-close is-large",onClick:this.onClose}))}}]),t}(n.Component));var D=function(e){return{type:u.addCity,payload:e}},I=function(e){return{type:u.removeCity,payload:e}},S=function(e){function t(e,a){var n;Object(h.a)(this,t),(n=Object(y.a)(this,Object(f.a)(t).call(this,e,a))).selectCity=n.selectCity.bind(Object(E.a)(Object(E.a)(n))),n.addCity=n.addCity.bind(Object(E.a)(Object(E.a)(n))),n.removeCity=n.removeCity.bind(Object(E.a)(Object(E.a)(n))),n.closeModal=n.closeModal.bind(Object(E.a)(Object(E.a)(n))),n.submitCity=n.submitCity.bind(Object(E.a)(Object(E.a)(n)));var i=n.props.cities.sort(function(e,t){return e.name.localeCompare(t.name)});return n.state={selectedCity:i[0],modalActive:!1,dbIsLoaded:!1,DB:[]},n}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){0===this.props.cities.length&&this.addCity()}},{key:"render",value:function(){var e=this.state.selectedCity,t=this.props.cities.sort(function(e,t){return e.name.localeCompare(t.name)}),a=this.state.DB,n=this.state.modalActive;return i.a.createElement("div",null,i.a.createElement(w,{DB:a,active:n,onClose:this.closeModal,onSubmit:this.submitCity}),i.a.createElement(N,{config:j}),i.a.createElement("div",{className:"columns"},i.a.createElement("div",{className:"column is-two-fifths",style:{padding:"16px"}},i.a.createElement(O,{cities:t,selected:e,onSelect:this.selectCity,onAdd:this.addCity})),i.a.createElement("div",{className:"column is-three-fifths"},e?i.a.createElement(A,{city:e,onRemove:this.removeCity}):"")),i.a.createElement(k,{config:j}))}},{key:"selectCity",value:function(e){this.setState({selectedCity:e})}},{key:"removeCity",value:function(e){var t=this.props.cities.findIndex(function(t){return t.key===e});this.props.removeCity(e),t===this.props.cities.length-1?this.selectCity(this.props.cities[t-1]):this.selectCity(this.props.cities[t+1]),1===this.props.cities.length&&this.addCity()}},{key:"addCity",value:function(){var e=this;this.state.dbIsLoaded?this.setState({modalActive:!0}):fetch("/cities.json").then(function(e){return e.json()}).then(function(t){e.setState({DB:t,dbIsLoaded:!0,modalActive:!0})})}},{key:"submitCity",value:function(e){this.closeModal(),this.props.addCity(e),this.selectCity(e)}},{key:"closeModal",value:function(){this.setState({modalActive:!1})}}]),t}(n.Component),L=Object(o.b)(function(e){return{cities:e}},function(e){return{addCity:function(t){return e(D(t))},removeCity:function(t){return e(I(t))}}})(S);a(38),a(40);s.a.render(i.a.createElement(o.a,{store:p},i.a.createElement(L,null)),document.getElementById("root"))}},[[21,2,1]]]);
//# sourceMappingURL=main.a57bbdb0.chunk.js.map